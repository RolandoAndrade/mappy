<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<form class="form-signin" method="POST" action="">
  	<h2 class="form-signin-heading">Please sign in</h2>
  	<input class="form-control" type="text" 	name="email" placeholder="Email address">
  	<input class="form-control" type="password" name="password" placeholder="Password">
  	<input class="form-control" type="date" 	name="birthDate" placeholder="Password">
  	<input class="form-control" type="text" 	name="firstName" placeholder="Password">
  	<input class="form-control" type="text" 	name="secondName" placeholder="Password">
  	<input class="form-control" type="text" 	name="firstSurname" placeholder="Password">
  	<input class="form-control" type="text" 	name="secondSurname" placeholder="Password">
  	<button class="btn btn-lg btn-primary btn-block" type="button" onclick="goTo()">Sign in</button>
</form>
</body>
<script>
function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie != '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {

            var cookie = cookies[i];
            console.log(cookie);
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) == (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
function goTo () 
{
 const url = 'http://localhost:8000/api/user/';
  // The data we are going to send in our request
  var dat = {
      email: "sghfsh@p.com", password: "Pies3.14",
      birthDate:"1998-12-10", firstName:"A",
      secondName:"A",
      firstSurname:"A",
      secondSurname:"A"
  };
  dat=JSON.stringify(dat);

  console.log(dat);
var csrftoken=getCookie("csrftoken");
console.log(csrftoken);
  getDevices = async () => {

    const location = window.location.hostname;
    const settings = {
        method: 'POST',
        body: dat,
        headers: {
            Accept: 'application/json',
            'Content-Type': 'application/json',
            "X-CSRFToken": csrftoken,
        }
    };
    console.log("f1");

    const data = await fetch(url, settings)
        .then(response => response.json())
        .then(json => {
            console.log(json);
            return json;
        })
        .catch(e => {
          console.log(e);
            return e
        });
	console.log(data);
    return data;

}
getDevices();
}
</script>
</html>